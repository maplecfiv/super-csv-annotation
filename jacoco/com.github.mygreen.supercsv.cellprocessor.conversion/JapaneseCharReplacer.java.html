<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="ja"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>JapaneseCharReplacer.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">Super CSV Annotation</a> &gt; <a href="index.source.html" class="el_package">com.github.mygreen.supercsv.cellprocessor.conversion</a> &gt; <span class="el_source">JapaneseCharReplacer.java</span></div><h1>JapaneseCharReplacer.java</h1><pre class="source lang-java linenums">package com.github.mygreen.supercsv.cellprocessor.conversion;

import java.util.Arrays;
import java.util.Collection;
import java.util.Collections;
import java.util.HashMap;
import java.util.HashSet;
import java.util.Map;
import java.util.Set;

import com.github.mygreen.supercsv.util.Utils;

/**
 * 日本語の全角・半角の文字を置換する。
 * 
 * @since 2.0
 * @author T.TSUCHIE
 *
 */
public class JapaneseCharReplacer {
    
    private static final Map&lt;CharCategory, String[][]&gt; CHAR_MAPS;
    static {
<span class="fc" id="L24">        final Map&lt;CharCategory, String[][]&gt; map = new HashMap&lt;&gt;();</span>
        
<span class="fc" id="L26">        map.put(CharCategory.Number, new String[][]{</span>
            {&quot;0&quot;, &quot;０&quot;},
            {&quot;1&quot;, &quot;１&quot;},
            {&quot;2&quot;, &quot;２&quot;},
            {&quot;3&quot;, &quot;３&quot;},
            {&quot;4&quot;, &quot;４&quot;},
            {&quot;5&quot;, &quot;５&quot;},
            {&quot;6&quot;, &quot;６&quot;},
            {&quot;7&quot;, &quot;７&quot;},
            {&quot;8&quot;, &quot;８&quot;},
            {&quot;9&quot;, &quot;９&quot;},
        });
        
<span class="fc" id="L39">        map.put(CharCategory.Alpha, new String[][]{</span>
            {&quot;a&quot;, &quot;ａ&quot;},
            {&quot;b&quot;, &quot;ｂ&quot;},
            {&quot;c&quot;, &quot;ｃ&quot;},
            {&quot;d&quot;, &quot;ｄ&quot;},
            {&quot;e&quot;, &quot;ｅ&quot;},
            {&quot;f&quot;, &quot;ｆ&quot;},
            {&quot;g&quot;, &quot;ｇ&quot;},
            {&quot;h&quot;, &quot;ｈ&quot;},
            {&quot;i&quot;, &quot;ｉ&quot;},
            {&quot;j&quot;, &quot;ｊ&quot;},
            {&quot;k&quot;, &quot;ｋ&quot;},
            {&quot;l&quot;, &quot;ｌ&quot;},
            {&quot;m&quot;, &quot;ｍ&quot;},
            {&quot;n&quot;, &quot;ｎ&quot;},
            {&quot;o&quot;, &quot;ｏ&quot;},
            {&quot;p&quot;, &quot;ｐ&quot;},
            {&quot;q&quot;, &quot;ｑ&quot;},
            {&quot;r&quot;, &quot;ｒ&quot;},
            {&quot;s&quot;, &quot;ｓ&quot;},
            {&quot;t&quot;, &quot;ｔ&quot;},
            {&quot;u&quot;, &quot;ｕ&quot;},
            {&quot;v&quot;, &quot;ｖ&quot;},
            {&quot;w&quot;, &quot;ｗ&quot;},
            {&quot;x&quot;, &quot;ｘ&quot;},
            {&quot;y&quot;, &quot;ｙ&quot;},
            {&quot;z&quot;, &quot;ｚ&quot;},
            
            {&quot;A&quot;, &quot;Ａ&quot;},
            {&quot;B&quot;, &quot;Ｂ&quot;},
            {&quot;C&quot;, &quot;Ｃ&quot;},
            {&quot;D&quot;, &quot;Ｄ&quot;},
            {&quot;E&quot;, &quot;Ｅ&quot;},
            {&quot;F&quot;, &quot;Ｆ&quot;},
            {&quot;G&quot;, &quot;Ｇ&quot;},
            {&quot;H&quot;, &quot;Ｈ&quot;},
            {&quot;I&quot;, &quot;Ｉ&quot;},
            {&quot;J&quot;, &quot;Ｊ&quot;},
            {&quot;K&quot;, &quot;Ｋ&quot;},
            {&quot;L&quot;, &quot;Ｌ&quot;},
            {&quot;M&quot;, &quot;Ｍ&quot;},
            {&quot;N&quot;, &quot;Ｎ&quot;},
            {&quot;O&quot;, &quot;Ｏ&quot;},
            {&quot;P&quot;, &quot;Ｐ&quot;},
            {&quot;Q&quot;, &quot;Ｑ&quot;},
            {&quot;R&quot;, &quot;Ｒ&quot;},
            {&quot;S&quot;, &quot;Ｓ&quot;},
            {&quot;T&quot;, &quot;Ｔ&quot;},
            {&quot;U&quot;, &quot;Ｕ&quot;},
            {&quot;V&quot;, &quot;Ｖ&quot;},
            {&quot;W&quot;, &quot;Ｗ&quot;},
            {&quot;X&quot;, &quot;Ｘ&quot;},
            {&quot;Y&quot;, &quot;Ｙ&quot;},
            {&quot;Z&quot;, &quot;Ｚ&quot;},
            
        });
        
<span class="fc" id="L96">        map.put(CharCategory.Space, new String[][]{</span>
            {&quot; &quot;, &quot;　&quot;},
            
        });
        
<span class="fc" id="L101">        map.put(CharCategory.Symbol, new String[][]{</span>
            {&quot;!&quot;, &quot;！&quot;},
            {&quot;\&quot;&quot;, &quot;”&quot;},
            {&quot;#&quot;, &quot;＃&quot;},
            {&quot;$&quot;, &quot;＄&quot;},
            {&quot;%&quot;, &quot;％&quot;},
            {&quot;&amp;&quot;, &quot;＆&quot;},
            {&quot;'&quot;, &quot;’&quot;},
            {&quot;(&quot;, &quot;（&quot;},
            {&quot;)&quot;, &quot;）&quot;},
            {&quot;=&quot;, &quot;＝&quot;},
            {&quot;^&quot;, &quot;＾&quot;},
            {&quot;~&quot;, &quot;～&quot;},
            {&quot;|&quot;, &quot;｜&quot;},
            {&quot;\\&quot;, &quot;￥&quot;},
            {&quot;`&quot;, &quot;‘&quot;},
            {&quot;@&quot;, &quot;＠&quot;},
            {&quot;[&quot;, &quot;［&quot;},
            {&quot;]&quot;, &quot;］&quot;},
            {&quot;{&quot;, &quot;｛&quot;},
            {&quot;}&quot;, &quot;｝&quot;},
            {&quot;+&quot;, &quot;＋&quot;},
            {&quot;-&quot;, &quot;ー&quot;},
            {&quot;;&quot;, &quot;；&quot;},
            {&quot;:&quot;, &quot;：&quot;},
            {&quot;*&quot;, &quot;＊&quot;},
            {&quot;&lt;&quot;, &quot;＜&quot;},
            {&quot;&gt;&quot;, &quot;＞&quot;},
            {&quot;,&quot;, &quot;，&quot;},
            {&quot;.&quot;, &quot;．&quot;},
            {&quot;?&quot;, &quot;？&quot;},
            {&quot;/&quot;, &quot;／&quot;},
            {&quot;_&quot;, &quot;＿&quot;},
            
        });
        
<span class="fc" id="L137">        map.put(CharCategory.Katakana, new String[][] {</span>
            
            {&quot;ｱ&quot;, &quot;ア&quot;},
            {&quot;ｲ&quot;, &quot;イ&quot;},
            {&quot;ｳ&quot;, &quot;ウ&quot;},
            {&quot;ｴ&quot;, &quot;エ&quot;},
            {&quot;ｵ&quot;, &quot;オ&quot;},
            
            {&quot;ｶ&quot;, &quot;カ&quot;},
            {&quot;ｷ&quot;, &quot;キ&quot;},
            {&quot;ｸ&quot;, &quot;ク&quot;},
            {&quot;ｹ&quot;, &quot;ケ&quot;},
            {&quot;ｺ&quot;, &quot;コ&quot;},
            
            {&quot;ｻ&quot;, &quot;サ&quot;},
            {&quot;ｼ&quot;, &quot;シ&quot;},
            {&quot;ｽ&quot;, &quot;ス&quot;},
            {&quot;ｾ&quot;, &quot;セ&quot;},
            {&quot;ｿ&quot;, &quot;ソ&quot;},
            
            {&quot;ﾀ&quot;, &quot;タ&quot;},
            {&quot;ﾁ&quot;, &quot;チ&quot;},
            {&quot;ﾂ&quot;, &quot;ツ&quot;},
            {&quot;ﾃ&quot;, &quot;テ&quot;},
            {&quot;ﾄ&quot;, &quot;ト&quot;},
            
            {&quot;ﾅ&quot;, &quot;ナ&quot;},
            {&quot;ﾆ&quot;, &quot;ニ&quot;},
            {&quot;ﾇ&quot;, &quot;ヌ&quot;},
            {&quot;ﾈ&quot;, &quot;ネ&quot;},
            {&quot;ﾉ&quot;, &quot;ノ&quot;},
            
            {&quot;ﾊ&quot;, &quot;ハ&quot;},
            {&quot;ﾋ&quot;, &quot;ヒ&quot;},
            {&quot;ﾌ&quot;, &quot;フ&quot;},
            {&quot;ﾍ&quot;, &quot;ヘ&quot;},
            {&quot;ﾎ&quot;, &quot;ホ&quot;},
            
            {&quot;ﾏ&quot;, &quot;マ&quot;},
            {&quot;ﾐ&quot;, &quot;ミ&quot;},
            {&quot;ﾑ&quot;, &quot;ム&quot;},
            {&quot;ﾒ&quot;, &quot;メ&quot;},
            {&quot;ﾓ&quot;, &quot;モ&quot;},
            
            {&quot;ﾔ&quot;, &quot;ヤ&quot;},
            {&quot;ﾕ&quot;, &quot;ユ&quot;},
            {&quot;ﾖ&quot;, &quot;ヨ&quot;},
            
            {&quot;ﾗ&quot;, &quot;ラ&quot;},
            {&quot;ﾘ&quot;, &quot;リ&quot;},
            {&quot;ﾙ&quot;, &quot;ル&quot;},
            {&quot;ﾚ&quot;, &quot;レ&quot;},
            {&quot;ﾛ&quot;, &quot;ロ&quot;},
            
            {&quot;ﾜ&quot;, &quot;ワ&quot;},
            {&quot;ｦ&quot;, &quot;ヲ&quot;},
            
            {&quot;ﾝ&quot;, &quot;ン&quot;},
            
            {&quot;ｳﾞ&quot;, &quot;ヴ&quot;},
            
            {&quot;ﾊﾟ&quot;, &quot;パ&quot;},
            {&quot;ﾋﾟ&quot;, &quot;ピ&quot;},
            {&quot;ﾌﾟ&quot;, &quot;プ&quot;},
            {&quot;ﾍﾟ&quot;, &quot;ペ&quot;},
            {&quot;ﾎﾟ&quot;, &quot;ポ&quot;},
            
            {&quot;ﾊﾞ&quot;, &quot;バ&quot;},
            {&quot;ﾋﾞ&quot;, &quot;ビ&quot;},
            {&quot;ﾌﾞ&quot;, &quot;ブ&quot;},
            {&quot;ﾍﾞ&quot;, &quot;ベ&quot;},
            {&quot;ﾎﾞ&quot;, &quot;ボ&quot;},
            
            {&quot;ｧ&quot;, &quot;ァ&quot;},
            {&quot;ｨ&quot;, &quot;ィ&quot;},
            {&quot;ｩ&quot;, &quot;ゥ&quot;},
            {&quot;ｪ&quot;, &quot;ェ&quot;},
            {&quot;ｫ&quot;, &quot;ォ&quot;},
            
            {&quot;ｯ&quot;, &quot;ッ&quot;}
            
        });
        
<span class="fc" id="L220">        CHAR_MAPS = Collections.unmodifiableMap(map);</span>
        
<span class="fc" id="L222">    }</span>
    
    /** 全角文字への置換処理 */
<span class="fc" id="L225">    private final CharReplacer fullCharReplacer = new CharReplacer();</span>
    
    /** 半角文字への置換処理 */
<span class="fc" id="L228">    private final CharReplacer halfCharReplacer = new CharReplacer();</span>
    
<span class="fc" id="L230">    public JapaneseCharReplacer(final Collection&lt;CharCategory&gt; categories) {</span>
        
<span class="fc" id="L232">        Set&lt;CharCategory&gt; categorySet = new HashSet&lt;&gt;(categories);</span>
<span class="fc bfc" id="L233" title="All 2 branches covered.">        for(CharCategory category : categorySet) {</span>
<span class="fc" id="L234">            final String[][] charMap = CHAR_MAPS.get(category);</span>
<span class="fc bfc" id="L235" title="All 2 branches covered.">            for(String[] map : charMap) {</span>
<span class="fc" id="L236">                fullCharReplacer.register(map[0], map[1]);</span>
<span class="fc" id="L237">                halfCharReplacer.register(map[1], map[0]);</span>
            }
<span class="fc" id="L239">        }</span>
        
<span class="fc" id="L241">        fullCharReplacer.ready();</span>
<span class="fc" id="L242">        halfCharReplacer.ready();</span>
        
<span class="fc" id="L244">    }</span>
    
    public JapaneseCharReplacer(final CharCategory... categories) {
<span class="fc" id="L247">        this(Arrays.asList(categories));</span>
        
<span class="fc" id="L249">    }</span>
    
    /**
     * 半角を全角に変換する。
     * @param text 変換対象の文字列。
     * @return 変換後の値。変換対象の値がnullまたは空文字の場合は、そのまま返します。
     */
    public String replaceToFullChar(final String text) {
<span class="fc bfc" id="L257" title="All 2 branches covered.">        if(Utils.isEmpty(text)) {</span>
<span class="fc" id="L258">            return text;</span>
        }
        
<span class="fc" id="L261">        return fullCharReplacer.replace(text);</span>
    }
    
    /**
     * 全角を半角に変換する。
     * @param text 変換対象の文字列。
     * @return 変換後の値。変換対象の値がnullまたは空文字の場合は、そのまま返します。
     */
    public String replaceToHalfChar(final String text) {
        
<span class="fc bfc" id="L271" title="All 2 branches covered.">        if(Utils.isEmpty(text)) {</span>
<span class="fc" id="L272">            return text;</span>
        }
        
<span class="fc" id="L275">        return halfCharReplacer.replace(text);</span>
        
    }
    
    
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.5.201910111838</span></div></body></html>